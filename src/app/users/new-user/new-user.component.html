<div class="container">
  <div class="row">
    <div *ngIf="errorMessage" class="alert alert-danger">
      {{ errorMessage }}
    </div>
    <div class="m-auto col-auto">

      <h2>Crée un nouveau compte</h2>
      <form [formGroup]="userForm" (ngSubmit)="onSubmitForm($event)">
        <div class="mb-3">
          <label for="name" class="form-label">Nom</label>
          <input type="text" class="form-control" id="name" formControlName="name"
                 [ngClass]="{'is-invalid': userForm.get('name')?.touched && userForm.get('name')?.invalid}">
          <div *ngIf="userForm.get('name')?.touched && userForm.get('name')?.invalid" class="invalid-feedback">
            <div *ngIf="userForm.get('name')?.errors?.['required']">Le nom est requis.</div>
          </div>
        </div>

        <div class="mb-3">
          <label for="email" class="form-label">Email</label>
          <input type="email" id="email" formControlName="email" class="form-control"
                 [ngClass]="{'is-invalid': userForm.get('email')?.touched && userForm.get('email')?.invalid}">
          <div *ngIf="userForm.get('email')?.touched && userForm.get('email')?.invalid" class="invalid-feedback">
            <div *ngIf="userForm.get('email')?.errors?.['required']">Email est requis.</div>
            <div *ngIf="userForm.get('email')?.errors?.['email']">Veuillez entrer un email valide.</div>
          </div>
        </div>

        <div class="mb-3">
          <label for="password" class="form-label">Mot de passe</label>
          <input type="password" class="form-control" id="password" formControlName="password"
                 [ngClass]="{'is-invalid': userForm.get('password')?.touched && userForm.get('password')?.invalid}">
          <div *ngIf="userForm.get('password')?.touched && userForm.get('password')?.invalid" class="invalid-feedback">
            <div *ngIf="userForm.get('password')?.errors?.['required']">Un mot de passe est requis.</div>
            <div *ngIf="userForm.get('password')?.errors?.['minlength']">Le mot de passe doit contenir au moins 8
              caractères.
            </div>
            <div *ngIf="userForm.get('password')?.errors?.['pattern']">Le mot de passe doit contenir au moins un
              chiffre.
            </div>
          </div>
        </div>


        <button type="submit" class="btn btn-primary" [disabled]="!userForm.valid">Créer un compte</button>
      </form>

    </div>
  </div>
</div>
